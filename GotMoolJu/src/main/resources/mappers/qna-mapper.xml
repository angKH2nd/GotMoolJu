<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="qnaMapper">

	<resultMap id="qnaResult" type="Qna">
       <result column="qna_no" property="qnaNo"/>
       <result column="qna_writer" property="qnaWriter"/>
       <result column="qna_title" property="qnaTitle"/>
       <result column="qna_content" property="qnaContent"/>
       <result column="qna_date" property="qnaCreateDate"/>
       <result column="qna_answer_status" property="qnaAnswerStatus"/>
       <result column="qna_type" property="qnaType"/>
       <result column="answer_content" property="qnaAnswerContent"/>
       <result column="answer_date" property="qnaAnswerCreateDate"/>
    </resultMap>

	<select id="selectQnaList" resultMap="qnaResult">
	      select  
	             q.qna_no
	           , m.user_nickname as "qna_writer"
	           , q.qna_title
	           , q.qna_content
	           , to_char(qna_create_date, 'YYYY-MM-DD') as "qna_date"
	           , q.qna_answer_status
	           , q.qna_type
	           , a.qna_answer_content as "answer_content"
	           , to_char(a.qna_answer_create_date, 'YYYY-MM-DD') as "answer_date"
	       from tb_qna q
	       left join tb_qna_answer a on q.qna_no = a.qna_answer_ref_no
	       left join tb_member m on q.qna_writer = m.user_no
	      where q.qna_status = 'Y'
	</select>

</mapper>
